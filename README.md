# $DEVOPS-TOOLS-CLOUD-COMPUTING$

## Adicionar os usuários ao bando de dados

### Passo 1

```sql
-- Estando como SYS (com SYSDBA):
ALTER SESSION SET CONTAINER = XEPDB1;

-- Criação dos usuários
CREATE USER gustavo IDENTIFIED BY rm555708;
GRANT CONNECT TO gustavo;

CREATE USER nathalia IDENTIFIED BY rm554945;
GRANT CONNECT TO nathalia;

CREATE USER francesco IDENTIFIED BY rm557313;
GRANT CONNECT TO francesco;

CREATE USER fontevivauser IDENTIFIED BY fontevivapass;
GRANT CONNECT TO fontevivauser;

-- (Opcional) Permitir que criem objetos (views, procedures etc.)
GRANT RESOURCE TO gustavo;
GRANT RESOURCE TO nathalia;
GRANT RESOURCE TO francesco;
GRANT RESOURCE TO fontevivauser;

GRANT CREATE VIEW TO gustavo;
GRANT CREATE VIEW TO francesco;
GRANT CREATE VIEW TO nathalia;
GRANT CREATE VIEW TO fontevivauser;


ALTER USER francesco QUOTA UNLIMITED ON users;
ALTER USER gustavo QUOTA UNLIMITED ON users;
ALTER USER nathalia QUOTA UNLIMITED ON users;
ALTER USER fontevivauser QUOTA UNLIMITED ON users;

```

### Passo 2

dentro do meu usuário

```sql
BEGIN
  -- GRANT em todas as TABELAS
  FOR r IN (
    SELECT table_name FROM user_tables
  ) LOOP
    EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE, DELETE ON ' || r.table_name || ' TO gustavo';
    EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE, DELETE ON ' || r.table_name || ' TO nathalia';
    EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE, DELETE ON ' || r.table_name || ' TO fontevivauser';
  END LOOP;

  -- GRANT em todas as SEQUENCES
  FOR s IN (
    SELECT sequence_name FROM user_sequences
  ) LOOP
    EXECUTE IMMEDIATE 'GRANT SELECT ON ' || s.sequence_name || ' TO gustavo';
    EXECUTE IMMEDIATE 'GRANT SELECT ON ' || s.sequence_name || ' TO nathalia';
    EXECUTE IMMEDIATE 'GRANT SELECT ON ' || s.sequence_name || ' TO fontevivauser';
  END LOOP;
END;
/

CREATE OR REPLACE SYNONYM T_FV_CONTATO FOR FRANCESCO.T_FV_CONTATO;
CREATE OR REPLACE SYNONYM T_FV_ENDERECO FOR FRANCESCO.T_FV_ENDERECO;
CREATE OR REPLACE SYNONYM T_FV_ESTACAO_TRATAMENTO FOR FRANCESCO.T_FV_ESTACAO_TRATAMENTO;
CREATE OR REPLACE SYNONYM T_FV_FORNECEDOR FOR FRANCESCO.T_FV_FORNECEDOR;
CREATE OR REPLACE SYNONYM T_FV_MATERIAL FOR FRANCESCO.T_FV_MATERIAL;
CREATE OR REPLACE SYNONYM T_FV_REGISTRO_MEDIDA FOR FRANCESCO.T_FV_REGISTRO_MEDIDA;
CREATE OR REPLACE SYNONYM T_FV_RESPONSAVEL FOR FRANCESCO.T_FV_RESPONSAVEL;
CREATE OR REPLACE SYNONYM T_FV_SENSOR FOR FRANCESCO.T_FV_SENSOR;

CREATE OR REPLACE VIEW VIEW_T_FV_CONTATO AS SELECT * FROM T_FV_CONTATO;
CREATE OR REPLACE VIEW VIEW_T_FV_ENDERECO AS SELECT * FROM T_FV_ENDERECO;
CREATE OR REPLACE VIEW VIEW_T_FV_ESTACAO_TRATAMENTO AS SELECT * FROM T_FV_ESTACAO_TRATAMENTO;
CREATE OR REPLACE VIEW VIEW_T_FV_FORNECEDOR AS SELECT * FROM T_FV_FORNECEDOR;
CREATE OR REPLACE VIEW VIEW_T_FV_MATERIAL AS SELECT * FROM T_FV_MATERIAL;
CREATE OR REPLACE VIEW VIEW_T_FV_REGISTRO_MEDIDA AS SELECT * FROM T_FV_REGISTRO_MEDIDA;
CREATE OR REPLACE VIEW VIEW_T_FV_RESPONSAVEL AS SELECT * FROM T_FV_RESPONSAVEL;
CREATE OR REPLACE VIEW VIEW_T_FV_SENSOR AS SELECT * FROM T_FV_SENSOR;

CREATE OR REPLACE SYNONYM SEQ_ID_SENSOR FOR FRANCESCO.SEQ_ID_SENSOR;
CREATE OR REPLACE SYNONYM SEQ_ID_ESTACAO FOR FRANCESCO.SEQ_ID_ESTACAO;
CREATE OR REPLACE SYNONYM SEQ_ID_ENDERECO FOR FRANCESCO.SEQ_ID_ENDERECO;
CREATE OR REPLACE SYNONYM SEQ_ID_CONTATO FOR FRANCESCO.SEQ_ID_CONTATO;
CREATE OR REPLACE SYNONYM SEQ_ID_MATERIAL FOR FRANCESCO.SEQ_ID_MATERIAL;
```
